<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PWA Photo Locator</title>

  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.json" />
</head>

<body>
  <header>
    <button id="homeBtn" class="nav-btn">
      <span class="btn-icon">ğŸ </span>
      <span class="btn-text">Home</span>
    </button>
    <button id="cameraBtn" class="nav-btn">
      <span class="btn-icon">ğŸ“·</span>
      <span class="btn-text">Camera</span>
    </button>
    <button id="galleryBtn" class="nav-btn">
      <span class="btn-icon">ğŸ–¼ï¸</span>
      <span class="btn-text">Gallery</span>
    </button>
    <button id="settingsBtn" class="nav-btn">
      <span class="btn-icon">âš™ï¸</span>
      <span class="btn-text">Settings</span>
    </button>
  </header>

  <div id="offlineBanner" class="offline hidden">
    âš ï¸ JesteÅ› offline â€” niektÃ³re funkcje mogÄ… nie dziaÅ‚aÄ‡
  </div>

  <!-- HOME VIEW -->
  <section id="homeView" class="view active">
    <div class="view-container">
      <h1>ğŸ“ Lokalizacja GPS</h1>
      <p class="subtitle">Pobierz swojÄ… aktualnÄ… pozycjÄ™</p>

      <button id="getLocation" class="primary-btn">
        <span class="btn-icon">ğŸŒ</span>
        Pobierz lokalizacjÄ™
      </button>

      <div id="locationCard" class="location-card hidden">
        <div class="card-header">
          <h3>ğŸ“ Twoja pozycja</h3>
          <span class="status-badge">âœ“ Aktywna</span>
        </div>
        
        <div class="address-section">
          <div class="address-icon">ğŸ“®</div>
          <div class="address-text">
            <div class="address-main" id="addressMain">Wyszukiwanie adresu...</div>
            <div class="address-details" id="addressDetails"></div>
          </div>
        </div>

        <div class="location-details">
          <div class="detail-item">
            <span class="detail-label">SzerokoÅ›Ä‡ geograficzna:</span>
            <span class="detail-value" id="latValue">-</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">DÅ‚ugoÅ›Ä‡ geograficzna:</span>
            <span class="detail-value" id="lngValue">-</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">DokÅ‚adnoÅ›Ä‡:</span>
            <span class="detail-value" id="accuracyValue">-</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Czas pobrania:</span>
            <span class="detail-value" id="timeValue">-</span>
          </div>
        </div>
        <a id="mapsLink" href="#" target="_blank" class="maps-btn hidden">
          ğŸ—ºï¸ OtwÃ³rz w Google Maps
        </a>
      </div>

      <p id="locationOutput" class="error-message"></p>

      <!-- STATYSTYKI -->
      <div class="stats-card">
        <h2>ğŸ“Š Statystyki</h2>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-value" id="totalPhotos">0</div>
            <div class="stat-label">Wszystkie zdjÄ™cia</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="totalAlbums">0</div>
            <div class="stat-label">Albumy</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CAMERA VIEW -->
  <section id="cameraView" class="view">
    <div class="view-container">
      <h1>ğŸ“· Aparat</h1>
      <p class="subtitle">ZrÃ³b zdjÄ™cie i zapisz do albumu</p>

      <div class="album-selector">
        <label for="albumSelect">Album:</label>
        <select id="albumSelect">
          <option value="Wszystkie">ğŸ“ Wszystkie zdjÄ™cia</option>
        </select>
        <button id="createAlbumBtn" class="small-btn">â• Nowy</button>
      </div>

      <div class="camera-container">
        <video id="camera" autoplay playsinline></video>
        <button id="captureBtn" class="capture-btn">
          <span class="capture-icon">ğŸ“¸</span>
        </button>
      </div>

      <canvas id="photoCanvas"></canvas>
    </div>
  </section>

  <!-- GALLERY VIEW -->
  <section id="galleryView" class="view">
    <div class="view-container">
      <div class="gallery-header">
        <h1>ğŸ–¼ï¸ Galeria</h1>
        <div class="gallery-controls">
          <select id="galleryAlbumFilter" class="album-filter">
            <option value="Wszystkie">ğŸ“ Wszystkie albumy</option>
          </select>
          <span id="photoCount" class="gallery-info">0 zdjÄ™Ä‡</span>
        </div>
      </div>

      <div id="gallery" class="gallery-grid"></div>
      
      <div id="emptyGallery" class="empty-state">
        <div class="empty-icon">ğŸ“·</div>
        <h3>Brak zdjÄ™Ä‡</h3>
        <p>PrzejdÅº do aparatu i zrÃ³b pierwsze zdjÄ™cie!</p>
      </div>
    </div>
  </section>

  <!-- SETTINGS VIEW -->
  <section id="settingsView" class="view">
    <div class="view-container">
      <h1>âš™ï¸ Ustawienia</h1>

      <!-- Motywy kolorystyczne -->
      <div class="settings-section">
        <h2>ğŸ¨ Motyw kolorystyczny</h2>
        <div class="theme-selector">
          <button class="theme-btn active" data-theme="purple">
            <span class="theme-color" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)"></span>
            <span>Fioletowy</span>
          </button>
          <button class="theme-btn" data-theme="blue">
            <span class="theme-color" style="background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%)"></span>
            <span>Niebieski</span>
          </button>
          <button class="theme-btn" data-theme="green">
            <span class="theme-color" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"></span>
            <span>Zielony</span>
          </button>
          <button class="theme-btn" data-theme="pink">
            <span class="theme-color" style="background: linear-gradient(135deg, #ec008c 0%, #fc6767 100%)"></span>
            <span>RÃ³Å¼owy</span>
          </button>
          <button class="theme-btn" data-theme="orange">
            <span class="theme-color" style="background: linear-gradient(135deg, #f46b45 0%, #eea849 100%)"></span>
            <span>PomaraÅ„czowy</span>
          </button>
        </div>
      </div>

      <!-- Albumy -->
      <div class="settings-section">
        <h2>ğŸ“ ZarzÄ…dzaj albumami</h2>
        <div id="albumsList" class="albums-list"></div>
      </div>

      <!-- Eksport -->
      <div class="settings-section">
        <h2>ğŸ“¥ Eksport</h2>
        <div class="export-section">
          <label for="exportAlbumSelect">Wybierz album do eksportu:</label>
          <select id="exportAlbumSelect" class="export-select">
            <option value="Wszystkie">ğŸ“ Wszystkie albumy</option>
          </select>
          <button id="exportPdfBtn" class="action-btn">ğŸ“„ Eksportuj do PDF</button>
        </div>
      </div>

      <!-- WyglÄ…d -->
      <div class="settings-section">
        <h2>ğŸŒ“ Tryb wyÅ›wietlania</h2>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Ciemny motyw</span>
            <p class="setting-description">PrzeÅ‚Ä…cz na ciemny tryb wyÅ›wietlania</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="darkModeToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Powiadomienia -->
      <div class="settings-section">
        <h2>ğŸ”” Powiadomienia</h2>
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Powiadomienia push</span>
            <p class="setting-description">Otrzymuj powiadomienia o zapisanych zdjÄ™ciach</p>
          </div>
          <label class="toggle-switch">
            <input type="checkbox" id="notificationsToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>

      <!-- Informacje -->
      <div class="settings-section">
        <h2>â„¹ï¸ Informacje</h2>
        <div class="info-item">
          <span class="info-label">Aplikacja:</span>
          <span class="info-value">PWA Photo Locator</span>
        </div>
        <div class="info-item">
          <span class="info-label">Wersja:</span>
          <span class="info-value">2.0.0</span>
        </div>
        <div class="info-item">
          <span class="info-label">Technologie:</span>
          <span class="info-value">HTML5, CSS3, JavaScript, Service Worker, PWA</span>
        </div>
      </div>
    </div>
  </section>

  <!-- PHOTO MODAL -->
  <div id="photoModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <button class="modal-close">âœ•</button>
      <img id="modalImage" src="" alt="ZdjÄ™cie">
      <div class="modal-toolbar">
        <button id="rotateBtn" class="tool-btn" title="ObrÃ³Ä‡">â†»</button>
        <button id="filterBtn" class="tool-btn" title="Filtry">ğŸ¨</button>
        <button id="textBtn" class="tool-btn" title="Dodaj tekst">ğŸ“</button>
      </div>
      <div class="modal-info">
        <p id="modalAlbum"></p>
        <p id="modalDate"></p>
      </div>
    </div>
  </div>

  <!-- FILTER MODAL -->
  <div id="filterModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content-small">
      <h3>ğŸ¨ Wybierz filtr</h3>
      <div class="filter-buttons">
        <button class="filter-btn" data-filter="grayscale">â¬› Czarno-biaÅ‚e</button>
        <button class="filter-btn" data-filter="sepia">ğŸŸ« Sepia</button>
        <button class="filter-btn" data-filter="invert">ğŸ”„ Negatyw</button>
        <button class="filter-btn" data-filter="blur">ğŸ’« Rozmycie</button>
        <button class="filter-btn" data-filter="brightness">â˜€ï¸ JasnoÅ›Ä‡</button>
        <button class="filter-btn" data-filter="contrast">ğŸ”† Kontrast</button>
      </div>
      <button id="closeFilterModal" class="secondary-btn">Zamknij</button>
    </div>
  </div>

  <!-- TEXT MODAL -->
  <div id="textModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content-small">
      <h3>ğŸ“ Dodaj tekst do zdjÄ™cia</h3>
      <input type="text" id="photoText" placeholder="Wpisz tekst...">
      <input type="color" id="textColor" value="#ffffff">
      <div class="modal-buttons">
        <button id="cancelText" class="secondary-btn">Anuluj</button>
        <button id="saveText" class="primary-btn-small">Dodaj</button>
      </div>
    </div>
  </div>

  <!-- CREATE ALBUM MODAL -->
  <div id="createAlbumModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content-small">
      <h3>â• Nowy album</h3>
      <input type="text" id="newAlbumName" placeholder="Nazwa albumu" maxlength="30">
      <div class="emoji-selector">
        <span class="emoji-option" data-emoji="ğŸ“">ğŸ“</span>
        <span class="emoji-option" data-emoji="ğŸš—">ğŸš—</span>
        <span class="emoji-option" data-emoji="ğŸ–ï¸">ğŸ–ï¸</span>
        <span class="emoji-option" data-emoji="ğŸ‰">ğŸ‰</span>
        <span class="emoji-option" data-emoji="ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
        <span class="emoji-option" data-emoji="ğŸ’¼">ğŸ’¼</span>
        <span class="emoji-option" data-emoji="ğŸ“">ğŸ“</span>
        <span class="emoji-option" data-emoji="ğŸ ">ğŸ </span>
      </div>
      <input type="hidden" id="selectedEmoji" value="ğŸ“">
      <div class="modal-buttons">
        <button id="cancelAlbumBtn" class="secondary-btn">Anuluj</button>
        <button id="saveAlbumBtn" class="primary-btn-small">UtwÃ³rz</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script type="module" src="js/main.js"></script>
</body>
</html>